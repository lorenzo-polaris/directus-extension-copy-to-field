import{defineInterface as e}from"@directus/extensions-sdk";import{defineComponent as t,ref as n,watch as i,resolveComponent as l,openBlock as a,createElementBlock as o,createVNode as r,createElementVNode as p,pushScopeId as d,popScopeId as c}from"vue";var u=t({props:{value:{type:String},destination_field:{type:String,default:"null"},fieldType:{type:String,default:"input"},collection:{type:String,default:null},field:{type:String,default:null},primaryKey:{type:String,default:null}},emits:["input","setFieldValue"],setup(e,{emit:t}){const l=n(e.value);return i((()=>e.value),(async(e,n)=>{e!==n&&setTimeout((()=>{l.value=e,t("input",e)}),1)})),console.log(e),{fieldType:e.fieldType,collection:e.collection,primaryKey:e.primaryKey,field:e.field,inputValue:l,handleChange:function(e){l.value=e,t("input",e)},copyToField:function(){t("setFieldValue",{field:e.destination_field,value:l})}}}}),s=[],f=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,i=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,a="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var o=s.indexOf(a);-1===o&&(o=s.push(a)-1,f[o]={}),n=f[o]&&f[o][i]?f[o][i]:f[o][i]=r()}else n=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),l=0;l<n.length;l++)e.setAttribute(n[l],t.attributes[n[l]]);var o="prepend"===i?"afterbegin":"beforeend";return a.insertAdjacentElement(o,e),e}}("\n.copy-to-input-wrapper[data-v-df32d788] {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 8px;\n}\n.copy-to-input-wrapper .icons-wrapper[data-v-df32d788] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n}\n.copy-to-textarea-wrapper[data-v-df32d788] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n.copy-to-textarea-wrapper .icons-wrapper[data-v-df32d788] {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  cursor: pointer;\n}\n",{});var y=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n};const m=e=>(d("data-v-df32d788"),e=e(),c(),e),v={key:0,class:"copy-to-input-wrapper"},g={key:1,class:"copy-to-textarea-wrapper"},x=m((()=>p("small",null,"Copia valore nel campo sottostante",-1))),w={key:2},T=[m((()=>p("p",null,"Field type not supported",-1)))];var h=e({id:"pp_copy_to_field",name:"Copy to Field",icon:"box",description:"Show a button to copy the value of a field to a destination field",types:["string","integer","float","text"],component:y(u,[["render",function(e,t,n,i,d,c){const u=l("VInput"),s=l("VIcon"),f=l("VTextarea");return"input"===e.fieldType?(a(),o("div",v,[r(u,{field:e.field,collection:e.collection,"primary-key":e.primaryKey,"model-value":e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.handleChange(t))},null,8,["field","collection","primary-key","model-value"]),p("div",{class:"icons-wrapper",onClick:t[1]||(t[1]=(...t)=>e.copyToField&&e.copyToField(...t))},[r(s,{name:"content_copy"}),r(s,{name:"arrow_downward"})])])):"textarea"===e.fieldType?(a(),o("div",g,[r(f,{field:e.field,collection:e.collection,"primary-key":e.primaryKey,"model-value":e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.handleChange(t))},null,8,["field","collection","primary-key","model-value"]),p("div",{class:"icons-wrapper",onClick:t[3]||(t[3]=(...t)=>e.copyToField&&e.copyToField(...t))},[r(s,{name:"content_copy"}),r(s,{name:"arrow_downward"}),x])])):(a(),o("div",w,T))}],["__scopeId","data-v-df32d788"],["__file","interface.vue"]]),options:[{field:"fieldType",name:"Type",type:"string",meta:{width:"full",interface:"select-dropdown",options:{allowNone:!1,default:"input",required:!0,choices:[{text:"Input",value:"input"},{text:"Textarea",value:"textarea"}]}}},{field:"destination_field",type:"string",name:"Destination Field",meta:{interface:"input"}}]});export{h as default};
